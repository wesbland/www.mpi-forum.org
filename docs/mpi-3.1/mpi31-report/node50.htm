<!DOCTYPE html>
<html lang=en>
<head>
<!-- This file was generated by tohtml from chap-pt2pt/pt2pt.tex -->
<!-- with the command
tohtml -default -basedef mpi3defs.txt -numbers -indexname myindex -dosnl -htables -quietlatex -allgif -endpage mpi3-forum-tail.htm -Wnoredef -o mpi31-report.tex mpi-report.tex 
-->
<title>Blocking Receive</title>
</head>
<body style="background-color:#FFFFFF">
<hr><h2><span id="Node50">46. Blocking Receive</span></h2>
<a href="node49.htm#Node49"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node46.htm#Node46"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node51.htm#Node51"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node46.htm#Node46"> Blocking Send and Receive Operations</a>
<b>Next: </b><a href="node51.htm#Node51"> Return Status</a>
<b>Previous: </b><a href="node49.htm#Node49"> Message Envelope</a>
<p>
  
  
<P> 
The syntax of the blocking receive operation is given below.  
<P> 
<TABLE><TR><TD COLSPAN=2>MPI_RECV (buf, count, datatype, source, tag, comm, status)</TD></TR>  
<TR><TD> OUT buf</TD><TD>initial address of receive buffer (choice)</TD></TR>  
<TR><TD> IN count</TD><TD>number of elements in receive buffer (non-negative  
integer)</TD></TR>  
<TR><TD> IN datatype</TD><TD>datatype of each receive buffer element (handle)</TD></TR>  
<TR><TD> IN source</TD><TD>rank of source or <font face="sans-serif">  MPI_ANY_SOURCE</font> (integer)</TD></TR>  
<TR><TD> IN tag</TD><TD>message tag or <font face="sans-serif">  MPI_ANY_TAG</font> (integer)</TD></TR>  
<TR><TD> IN comm</TD><TD>communicator (handle)</TD></TR>  
<TR><TD> OUT status</TD><TD>status object (Status)</TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_Recv(void* buf, int count, MPI_Datatype datatype, int source, int tag, MPI_Comm comm, MPI_Status *status) <br></tt>  
<P> 
 <tt> MPI_Recv(buf, count, datatype, source, tag, comm, status, ierror) <br> TYPE(*), DIMENSION(..) :: buf <br>INTEGER, INTENT(IN) :: count, source, tag <br>TYPE(MPI_Datatype), INTENT(IN) :: datatype <br>TYPE(MPI_Comm), INTENT(IN) :: comm <br>TYPE(MPI_Status) :: status <br>INTEGER, OPTIONAL, INTENT(OUT) :: ierror <br></tt>  
 <tt> MPI_RECV(BUF, COUNT, DATATYPE, SOURCE, TAG, COMM, STATUS, IERROR)<br> &lt;type&gt; BUF(*) <br>INTEGER  COUNT, DATATYPE, SOURCE, TAG, COMM, STATUS(MPI_STATUS_SIZE), IERROR <br></tt>  
  
  
<P> 
The blocking semantics of this call are described in Section <a href="node57.htm#Node57">Communication Modes 
</a>.  
<P> 
The receive buffer consists of  
the storage containing <font face="sans-serif"> count</font> consecutive elements of the type  
specified by <font face="sans-serif"> datatype</font>, starting at address <font face="sans-serif"> buf</font>.  
The length of the received message must be less than or equal to the length of  
the receive buffer. An overflow error occurs if all incoming data does  
not fit, without truncation, into the receive buffer.  
<P> 
If a  
message that is shorter than the receive buffer arrives, then only those  
locations corresponding to the (shorter) message are modified.  
<P> 
 
<br> 
<em> Advice to users.</em>  
<P> 
The <font face="sans-serif"> MPI_PROBE</font> function described in  
Section <a href="node68.htm#Node68">Probe and Cancel 
</a> can be used to receive messages of  
unknown length.  
 (<em> End of advice to users.</em>) <br> 
 
<br> 
<em> Advice  
        to implementors.</em>  
<P> 
Even though no specific behavior is mandated by <font face="sans-serif"> MPI</font> for erroneous programs, the  
recommended handling of overflow situations is to return in  
<font face="sans-serif"> status</font> information about the  
source and tag of the incoming message.  The receive operation will return an  
error code.  A quality implementation will also ensure that no memory  
that is outside the receive buffer will ever be overwritten.  
<P> 
In the case of a message shorter than the receive buffer, <font face="sans-serif"> MPI</font> is  
quite strict in that it allows no modification of the other locations.  
A more lenient statement would allow for some  
optimizations but this is not allowed.  The implementation must be ready to  
end a copy into the receiver memory exactly at the end of the receive  
buffer, even if it is an odd address.  
 (<em> End of advice to implementors.</em>) <br> 
The selection of a message by a receive operation is governed by  
the value of the message envelope.  
A message can be received by a receive operation  
if its envelope matches the <font face="sans-serif"> source</font>, <font face="sans-serif"> tag</font> and  
<font face="sans-serif"> comm</font> values specified by the  
receive operation.  The receiver may specify a wildcard  
<font face="sans-serif">  MPI_ANY_SOURCE</font>  
value for <font face="sans-serif"> source</font>, and/or  
a wildcard <font face="sans-serif">  MPI_ANY_TAG</font> value for <font face="sans-serif"> tag</font>,  
indicating that any source and/or tag are acceptable.   It cannot specify a  
wildcard value for <font face="sans-serif"> comm</font>.  
Thus, a message can be received by a receive  
operation only if it is addressed  
to the receiving process, has a matching communicator, has  
matching source unless  
source=<font face="sans-serif">  MPI_ANY_SOURCE</font>  
in the pattern, and has a matching tag unless   
tag=<font face="sans-serif">  MPI_ANY_TAG</font>   
in the pattern.  
<P> 
The message tag is specified by the <font face="sans-serif"> tag</font> argument of the  
receive operation.  
The argument <font face="sans-serif"> source</font>, if different from <font face="sans-serif">  MPI_ANY_SOURCE</font>,  
is specified as a rank within the process group associated  
with that same communicator (remote process group, for intercommunicators).  
Thus, the range of valid values for the  
<font face="sans-serif"> source</font> argument is  
{<i>0,...,n-1}cup{constMPI_ANY_SOURCE}cup{constMPI_PROC_NULL}</i>, where  
<i>n</i> is the number of processes in this group.  
<P> 
Note the asymmetry between send and receive operations:  A receive  
operation may  
accept messages from an arbitrary sender, on the other hand, a send operation  
must specify a unique receiver.  This matches a ``push'' communication  
mechanism, where data transfer is effected by the sender (rather than a  
``pull'' mechanism, where data transfer is effected by the receiver).  
<P> 
Source = destination is allowed, that is, a process can send a  
message to itself.  
(However, it is unsafe to do so with the blocking send and receive  
operations described above, since this may lead to deadlock. See  
Section <a href="node58.htm#Node58">Semantics of Point-to-Point Communication 
</a>.)  
<P> 
 
<br> 
<em> Advice  
        to implementors.</em>  
<P> 
Message context and other communicator information  
can be implemented as an additional tag field.  It differs  
from the regular message tag in that wild card matching is not allowed on this  
field, and that value setting for this field is controlled by communicator  
manipulation functions.  
 (<em> End of advice to implementors.</em>) <br> 
The use of dest or source=<font face="sans-serif">  MPI_PROC_NULL</font> to define a ``dummy''   
destination or source in any send or receive call is described in  
Section <a href="node75.htm#Node75">Null Processes 
</a>.  
<P> 

<P>
<hr>
<a href="node49.htm#Node49"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node46.htm#Node46"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node51.htm#Node51"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node46.htm#Node46"> Blocking Send and Receive Operations</a>
<b>Next: </b><a href="node51.htm#Node51"> Return Status</a>
<b>Previous: </b><a href="node49.htm#Node49"> Message Envelope</a>
<p>
<HR>
Return to <A HREF="node523.htm">MPI-3.1 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-3.1 of June 4, 2015<BR>
HTML Generated on June 4, 2015
</FONT>
</body>
</html>
