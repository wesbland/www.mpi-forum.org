<!DOCTYPE html>
<html lang=en>
<head>
<!-- This file was generated by tohtml from chap-binding/binding-2.tex -->
<!-- with the command
tohtml -default -basedef mpi3defs.txt -numbers -indexname myindex -dosnl -htables -quietlatex -allgif -endpage mpi3-forum-tail.htm -Wnoredef -o mpi31-report.tex mpi-report.tex 
-->
<title>Fortran Support Through the <tt>mpif.h</tt> Include File</title>
</head>
<body style="background-color:#FFFFFF">
<hr><h2><span id="Node411">358. Fortran Support Through the mpif.h Include File</span></h2>
<a href="node410.htm#Node410"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node407.htm#Node407"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node412.htm#Node412"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node407.htm#Node407"> Fortran Support</a>
<b>Next: </b><a href="node412.htm#Node412"> Interface Specifications, Procedure Names, and the Profiling Interface</a>
<b>Previous: </b><a href="node410.htm#Node410"> Fortran Support Through the <tt>mpi</tt> Module</a>
<p>
  
  
<P> 
The use of the <tt>mpif.h</tt> include file is strongly discouraged  
and may be deprecated in a future version of <font face="sans-serif"> MPI</font>.   
<P> 
An <font face="sans-serif"> MPI</font> implementation providing a Fortran interface must provide an include file named <tt>mpif.h</tt> that   
can be used in a Fortran program.   
Within all <font face="sans-serif"> MPI</font> function specifications,  
the second of the set of two Fortran routine interface specifications is supported by this include file.  
This include file must:  
<P> 
<ul> 
 
<li>Define all named <font face="sans-serif"> MPI</font> constants.  
 
<li>Declare <font face="sans-serif"> MPI</font> functions that return a value.  
 
<li>Define all handles as <tt> INTEGER</tt>.   
 
<li>Be valid and equivalent for both   
      fixed and free source form.  
</ul> 
<br> 
For each <font face="sans-serif"> MPI</font> routine, an implementation can choose   
to use an implicit or explicit interface   
for the second Fortran binding   
(in deprecated routines, the first one may be omitted).   
<ul> 
 
<li>Set the <tt> LOGICAL</tt> compile-time constants   
      <font face="sans-serif">  MPI_SUBARRAYS_SUPPORTED</font> and   
      <font face="sans-serif">  MPI_ASYNC_PROTECTS_NONBLOCKING</font>  
      according to the same rules as for the   
      <tt>mpi</tt> module.  
      In the case of implicit interfaces for choice buffer  
      or nonblocking routines, the constants must be set  
      to <tt> .FALSE.</tt>.   
</ul> 
<br> 
 
<br> 
<em> Advice to users.</em>  
<P> 
Instead of using <tt>mpif.h</tt>, the use of the <tt>mpi_f08</tt> or   
  <tt>mpi</tt> module is strongly encouraged  
  for the following reasons:  
  <ul> 
   
<li>Most <tt>mpif.h</tt> implementations do not include   
        compile-time argument checking.  
   
<li>Therefore, many bugs in <font face="sans-serif"> MPI</font> applications remain  
        undetected at compile-time, such as:   
        <ul> 
         
<li>Missing <font face="sans-serif"> ierror</font> as last argument in  
              most Fortran bindings.  
         
<li>Declaration of a <font face="sans-serif"> status</font> as an <tt> INTEGER</tt>  
              variable instead of an <tt> INTEGER</tt> array with  
              size <font face="sans-serif">  MPI_STATUS_SIZE</font>.  
         
<li>Incorrect argument positions; e.g., interchanging the   
              <font face="sans-serif"> count</font> and <font face="sans-serif"> datatype</font> arguments.  
         
<li>Passing incorrect <font face="sans-serif"> MPI</font> handles;  
              e.g., passing a datatype instead of a communicator.  
<P> 
</ul> 
<br> 
 
<li>The migration from <tt>mpif.h</tt> to the <tt>mpi</tt> module  
        should be relatively straightforward   
        (i.e., substituting <tt>include 'mpif.h'</tt> after   
        an <tt>implicit</tt> statement by <tt>use mpi</tt>   
        before that <tt>implicit</tt> statement)  
        as long as the application syntax is correct.   
   
<li>Migrating portable and correctly written   
        applications to the <tt>mpi</tt> module  
        is not expected to be difficult. No compile or runtime   
        problems should occur because an <tt>mpif.h</tt> include file  
        was always allowed to provide explicit   
        Fortran interfaces.  
  </ul> 
<br> 
 (<em> End of advice to users.</em>) <br> 
 
<br> 
<em> Rationale.</em>  
<P> 
With <font face="sans-serif"> MPI-3.0</font>, the <tt>mpif.h</tt> include file was not  
  deprecated in order to retain strong backward compatibility.  
  Internally, <tt>mpif.h</tt> and the <tt>mpi</tt> module may be  
  implemented so that essentialy the same library implementation   
  of the <font face="sans-serif"> MPI</font> routines can be used.  
 (<em> End of rationale.</em>) <br> 

<P>
<hr>
<a href="node410.htm#Node410"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node407.htm#Node407"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node412.htm#Node412"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node407.htm#Node407"> Fortran Support</a>
<b>Next: </b><a href="node412.htm#Node412"> Interface Specifications, Procedure Names, and the Profiling Interface</a>
<b>Previous: </b><a href="node410.htm#Node410"> Fortran Support Through the <tt>mpi</tt> Module</a>
<p>
<HR>
Return to <A HREF="node523.htm">MPI-3.1 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-3.1 of June 4, 2015<BR>
HTML Generated on June 4, 2015
</FONT>
</body>
</html>
