<!DOCTYPE html>
<html lang=en>
<head>
<!-- This file was generated by tohtml from chap-binding/binding-2.tex -->
<!-- with the command
tohtml -default -basedef mpi3defs.txt -numbers -indexname myindex -dosnl -htables -quietlatex -allgif -endpage mpi3-forum-tail.htm -Wnoredef -o mpi31-report.tex mpi-report.tex 
-->
<title>Problems Due to Strong Typing</title>
</head>
<body style="background-color:#FFFFFF">
<hr><h2><span id="Node421">365. Problems Due to Strong Typing</span></h2>
<a href="node420.htm#Node420"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node407.htm#Node407"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node422.htm#Node422"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node407.htm#Node407"> Fortran Support</a>
<b>Next: </b><a href="node422.htm#Node422"> Problems Due to Data Copying and Sequence Association with Subscript Triplets</a>
<b>Previous: </b><a href="node420.htm#Node420"> Problems With Fortran Bindings for <font face="sans-serif"> MPI</font></a>
<p>
  
<P> 
All <font face="sans-serif"> MPI</font> functions with choice arguments associate actual arguments  
of different Fortran datatypes with the same dummy argument.  This is  
not allowed by Fortran 77, and in Fortran 90, it is technically  
only allowed if the function is overloaded with a different function  
for each type  
(see also Section <a href="node413.htm#Node413"><font face="sans-serif"> MPI</font> for Different Fortran Standard Versions 
</a>).  
In C, the use of <tt>void*</tt> formal arguments avoids these problems.  
Similar to C, with Fortran 2008 + TS 29113 (and later) together with   
the <tt>mpi_f08</tt> module, the problem is avoided  
by declaring choice arguments with <tt>TYPE(*), DIMENSION(..)</tt>,   
i.e., as assumed-type and assumed-rank dummy arguments.   
<P> 
Using <tt>INCLUDE 'mpif.h'</tt>, the following code fragment   
is technically invalid and may  
generate a compile-time error.  
<br> 
<pre><tt>  integer i(5) 
  real    x(5) 
  ... 
  call mpi_send(x, 5, MPI_REAL, ...) 
  call mpi_send(i, 5, MPI_INTEGER, ...) 
</tt></pre> 
In practice, it is rare for compilers to do more than issue a  
warning.  
When using either the <tt>mpi_f08</tt> or <tt>mpi</tt> module, the problem is usually resolved through  
the assumed-type and assumed-rank declarations of the dummy arguments,  
or with a compiler-dependent mechanism that overrides type checking for choice arguments.   
<P> 
It is also technically invalid in Fortran to pass a scalar actual  
argument to an array dummy argument that is not a choice buffer argument.   
Thus, when using the <tt>mpi_f08</tt> or <tt>mpi</tt> module,   
the following code fragment usually generates an error since   
the  <font face="sans-serif"> dims</font> and  <font face="sans-serif"> periods</font> arguments to  
<font face="sans-serif"> MPI_CART_CREATE</font> are declared as assumed size arrays <tt> INTEGER</tt> :: <tt>DIMS(*)</tt> and <tt> LOGICAL</tt> :: <tt>PERIODS(*)</tt>.  
<P> 
  
<P> 
<br> 
<pre><tt>  USE mpi_f08     ! or  USE mpi  
  INTEGER size 
  CALL MPI_Cart_create( comm_old,1,size,.TRUE.,.TRUE.,comm_cart,ierror ) 
</tt></pre> 
Although this is a non-conforming <font face="sans-serif"> MPI</font> call,   
compiler warnings are not expected (but may occur)  
when using <tt>INCLUDE</tt> <tt>'mpif.h'</tt>   
and this include file does not use Fortran explicit interfaces.   
<P> 

<P>
<hr>
<a href="node420.htm#Node420"><img width=16 height=16 src="previous.gif" alt="Previous"></a><a href="node407.htm#Node407"><img width=16 height=16 src="up.gif" alt="Up"></a><a href="node422.htm#Node422"><img width=16 height=16 src="next.gif" alt="Next"></a><br>
<b>Up: </b><a href="node407.htm#Node407"> Fortran Support</a>
<b>Next: </b><a href="node422.htm#Node422"> Problems Due to Data Copying and Sequence Association with Subscript Triplets</a>
<b>Previous: </b><a href="node420.htm#Node420"> Problems With Fortran Bindings for <font face="sans-serif"> MPI</font></a>
<p>
<HR>
Return to <A HREF="node523.htm">MPI-3.1 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-3.1 of June 4, 2015<BR>
HTML Generated on June 4, 2015
</FONT>
</body>
</html>
