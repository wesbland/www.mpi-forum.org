<HTML>
<HEAD>
<!-- This file was generated by tohtml from chap-datatypes/datatypes.tex -->
<!-- with the command
tohtml -default -basedef ../mpi2defs-bw.txt -numbers -indexname myindex -dosnl -htables -quietlatex -allgif -endpage mpi2-forum-tail.htm -Wnoredef -o mpi21-report-bw.tex mpi-report.tex 
-->
<TITLE>True Extent of Datatypes</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<HR><H2><A NAME="Node75">74. True Extent of Datatypes</a></H2>
<A HREF="node74.htm#Node74"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node67.htm#Node67"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node76.htm#Node76"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node67.htm#Node67"> Derived Datatypes</a>
<b>Next: </b><A HREF="node76.htm#Node76"> Commit and Free</a>
<b>Previous: </b><A HREF="node74.htm#Node74"> Extent and Bounds of Datatypes</a>
<P>
  
Suppose we implement gather   
(see also Section <a href="node93.htm#Node93">Gather 
</a> on page <a href="node93.htm#Node93">Gather 
</a>)   
as a spanning tree implemented on top of  
point-to-point routines.  Since the receive buffer is only valid on the  
root process, one will need to allocate some temporary space for  
receiving data on intermediate nodes.  However, the datatype extent  
cannot be used as an estimate of the amount of space that needs to be  
allocated, if the user has modified the extent  
using the  MPI_UB and  MPI_LB values.  
A  
function is provided which returns  
the true extent of the datatype.  
  
<P> 
<TABLE><TR><TD COLSPAN=2>MPI_TYPE_GET_TRUE_EXTENT(datatype, true_lb, true_extent)</TD></TR>  
<TR><TD> IN datatype</TD><TD>datatype to get information on (handle)</TD></TR>  
<TR><TD> OUT true_lb</TD><TD>true lower bound of datatype (integer)</TD></TR>  
<TR><TD> OUT true_extent</TD><TD>true size of datatype (integer)</TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_Type_get_true_extent(MPI_Datatype datatype, MPI_Aint *true_lb, MPI_Aint *true_extent) <BR></tt>  
<P> 
 <tt> MPI_TYPE_GET_TRUE_EXTENT(DATATYPE, TRUE_LB, TRUE_EXTENT, IERROR)<BR> INTEGER DATATYPE,  IERROR<BR>INTEGER(KIND = MPI_ADDRESS_KIND) TRUE_LB, TRUE_EXTENT <BR></tt>  
<P> 
  
<P> 
 <tt> void MPI::Datatype::Get_true_extent(MPI::Aint&amp; true_lb, MPI::Aint&amp; true_extent) const <BR></tt>  
<P> 
 true_lb returns the offset of the lowest unit of store which  
is addressed by the datatype, i.e., the lower bound of the  
corresponding typemap, ignoring  MPI_LB markers.  
 true_extent returns the  
true size of  
the datatype, i.e., the extent of the corresponding typemap, ignoring  
 MPI_LB and  MPI_UB markers, and performing no  
rounding for alignment.  If the typemap associated with  
 datatype is  
<p><I> 
Typemap = { (type<SUB>0</SUB>, disp<SUB>0</SUB>), ... , (type<SUB>n-1</SUB>, disp<SUB>n-1</SUB>)} 
</I><p>  
Then  
  
<P><IMG WIDTH=250 HEIGHT=12 SRC="img37.gif"><P>
  
<P><IMG WIDTH=332 HEIGHT=12 SRC="img38.gif"><P>
  
  
and  
<p><I> 
true_extent (Typemap) = true_ub(Typemap) - true_lb(typemap). 
</I><p>  
(Readers should compare this with the definitions in   
Section <a href="node73.htm#Node73">Lower-Bound and Upper-Bound Markers 
</a> on page <a href="node73.htm#Node73">Lower-Bound and Upper-Bound Markers 
</a> and  
Section <a href="node74.htm#Node74">Extent and Bounds of Datatypes 
</a> on page <a href="node74.htm#Node74">Extent and Bounds of Datatypes 
</a>,  
which describe   
the function   
 MPI_TYPE_GET_EXTENT.)  
  
The  true_extent is the minimum number of bytes of  
memory necessary to hold a datatype, uncompressed.  
  
  
<P> 

<P>
<HR>
<A HREF="node74.htm#Node74"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node67.htm#Node67"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node76.htm#Node76"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node67.htm#Node67"> Derived Datatypes</a>
<b>Next: </b><A HREF="node76.htm#Node76"> Commit and Free</a>
<b>Previous: </b><A HREF="node74.htm#Node74"> Extent and Bounds of Datatypes</a>
<P>
<HR>
Return to <A HREF="node428.htm">MPI-2.1 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>MPI-2.0 of July 1, 2008<BR>
HTML Generated on July 6, 2008
</FONT>
</BODY>
</HTML>
