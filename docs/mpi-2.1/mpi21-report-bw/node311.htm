<HTML>
<HEAD>
<!-- This file was generated by tohtml from chap-prof/prof.tex -->
<!-- with the command
tohtml -default -basedef ../mpi2defs-bw.txt -numbers -indexname myindex -dosnl -htables -quietlatex -allgif -endpage mpi2-forum-tail.htm -Wnoredef -o mpi21-report-bw.tex mpi-report.tex 
-->
<TITLE>Miscellaneous Control of Profiling</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<HR><H2><A NAME="Node311">284. Miscellaneous Control of Profiling</a></H2>
<A HREF="node310.htm#Node310"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node310.htm#Node310"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node312.htm#Node312"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node310.htm#Node310"> Logic of the Design</a>
<b>Next: </b><A HREF="node312.htm#Node312"> Examples</a>
<b>Previous: </b><A HREF="node310.htm#Node310"> Logic of the Design</a>
<P>
There is a clear requirement for the user code to be able to control  
the profiler dynamically at run time. This is normally used for (at  
least) the purposes of  
<ul> 
 
<li>Enabling and disabling profiling depending on the state of the  
calculation.  
 
<li>Flushing trace buffers at non-critical points in the calculation  
 
<li>Adding user events to a trace file.  
</ul> 
<BR> 
These requirements are met by use of the  MPI_PCONTROL.  
<P> 
<TABLE><TR><TD COLSPAN=2>MPI_PCONTROL(level, ...)</TD></TR>  
<TR><TD> IN level</TD><TD>Profiling level</TD></TR>  
</TABLE>  
 <tt> int MPI_Pcontrol(const int level, ...) <BR></tt>  
  
 <tt> MPI_PCONTROL(LEVEL)<BR> INTEGER LEVEL, ... <BR></tt>  
 <tt> void MPI::Pcontrol(const int level, ...) <BR></tt>  
  
 MPI libraries themselves make no use of this routine, and simply  
return immediately to the user code. However the presence of calls to  
this routine allows a profiling package to be explicitly called by the  
user.  
<P> 
Since  MPI has no control of the implementation of the profiling code,  
we are unable to specify precisely the semantics   
that    
will be  
provided by calls to  MPI_PCONTROL. This vagueness extends to the   
number of arguments to the function, and their datatypes.  
<P> 
However to provide some level of portability of user codes to different  
profiling libraries, we request the following meanings for certain  
values of level.  
<ul> 
 
<li><tt> level==0</tt>  
Profiling is disabled.  
 
<li><tt> level==1</tt>  
Profiling is enabled at a normal default level of detail.  
 
<li><tt> level==2</tt>  
Profile buffers are flushed. (This may be a no-op in some profilers).  
 
<li>All other values of <tt> level</tt>  
have profile library defined effects and additional arguments.  
</ul> 
<BR> 
We also request that the default state after  MPI_INIT has been  
called is for profiling to be enabled at the normal default level.  
(i.e. as if  MPI_PCONTROL had just been called with the  
argument 1). This allows users to link with a profiling library and  
obtain profile output without having to modify their source code at  
all.  
<P> 
The provision of  MPI_PCONTROL as a no-op in the standard  MPI  
library allows them to modify their source code to obtain more  
detailed profiling information, but still be able to link exactly the  
same code against the standard  MPI library.  
<P> 

<P>
<HR>
<A HREF="node310.htm#Node310"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node310.htm#Node310"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node312.htm#Node312"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node310.htm#Node310"> Logic of the Design</a>
<b>Next: </b><A HREF="node312.htm#Node312"> Examples</a>
<b>Previous: </b><A HREF="node310.htm#Node310"> Logic of the Design</a>
<P>
<HR>
Return to <A HREF="node428.htm">MPI-2.1 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>MPI-2.0 of July 1, 2008<BR>
HTML Generated on July 6, 2008
</FONT>
</BODY>
</HTML>
