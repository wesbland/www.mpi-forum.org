<HTML>
<!-- This file was generated by tohtml from misc-1.2.tex -->
<!-- with the command
tohtml -default -endpage ../mpi2-forum-tail.htm -basedef ../mpi2defs.txt -numbers -indexname myindex -dosnl -htables -quietlatex mpi2-report.tex 
-->
<TITLE>Clarification of  MPI_PROBE and  MPI_IPROBE</TITLE>
<BODY BGCOLOR="#FFFFFF">
<HR><H2><A NAME="Node39">3.2.9. Clarification of  MPI_PROBE and  MPI_IPROBE</a></H2>
<A HREF="node38.htm#Node38"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node30.htm#Node30"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node40.htm#Node40"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node30.htm#Node30"> MPI-1.0 and MPI-1.1 Clarifications</a>
<b>Next: </b><A HREF="node40.htm#Node40"> Minor Corrections</a>
<b>Previous: </b><A HREF="node38.htm#Node38"> Clarification of Error Behavior of Attribute Callback Functions</a>
<P>
  
<P> 
  
Page 52, lines 1 thru 3 (of  MPI-1.1, the June 12, 1995 version without  
changebars) become:  
<P> 
``A subsequent receive executed with the same communicator, and the source and  
tag returned in status by  MPI_IPROBE will receive the message that  
was matched by the probe, if no other intervening receive occurs after the  
probe, and the send is not successfully cancelled before the receive.''  
<P> 
  
<P> 
 
<BR> 
<em> Rationale.</em>  
<P> 
The following program shows that the  MPI-1 definitions of cancel and probe  
  are in conflict:  
<P> 
<BR> 
<pre><tt>Process 0                        Process 1 
----------                       ---------- 
MPI_Init();                      MPI_Init(); 
MPI_Isend(dest=1);             
                                 MPI_Probe(); 
MPI_Barrier();                   MPI_Barrier(); 
MPI_Cancel();                     
MPI_Wait();                       
MPI_Test_cancelled();             
MPI_Barrier();                   MPI_Barrier(); 
                                 MPI_Recv(); 
 
</tt></pre> 
  
Since the send has been cancelled by process 0, the wait must be local (page  
54, line 13) and must return before the matching receive.  
For the wait to be local, the send must be successfully   
cancelled, and therefore must not match the receive in process 1 (page 54 line  
29).  
<P> 
However, it is clear that the probe on process 1 must eventually detect an  
incoming message. Page 52 line 1 makes it clear that the subsequent receive by  
process 1 must return the probed message.  
<P> 
The above are clearly contradictory, and therefore the text ``... and the  
send is not successfully cancelled before the receive'' must be added to   
line 3 of page 54.  
<P> 
An alternative solution (rejected) would be to change the semantics of cancel  
so that the call is not local if the message has been probed. This adds  
complexity to implementations, and adds a new concept of ``state'' to a  
message (probed or not). It would, however, preserve the feature that a  
blocking receive after a probe is local.  
<P> 
  
<P> 
 (<em> End of rationale.</em>) <BR> 
  
<P> 

<P>
<HR>
<A HREF="node38.htm#Node38"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node30.htm#Node30"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node40.htm#Node40"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node30.htm#Node30"> MPI-1.0 and MPI-1.1 Clarifications</a>
<b>Next: </b><A HREF="node40.htm#Node40"> Minor Corrections</a>
<b>Previous: </b><A HREF="node38.htm#Node38"> Clarification of Error Behavior of Attribute Callback Functions</a>
<P>
<HR>
Return to <A HREF="node306.htm">MPI-2 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/docs/mpi-11-html/node182.html">MPI 1.1 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>MPI-2.0 of July 18, 1997<BR>
HTML Generated on September 10, 2001
</FONT>
</BODY>
</HTML>
