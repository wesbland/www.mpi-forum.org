<HTML>
<!-- This file was generated by tohtml from misc-2.tex -->
<!-- with the command
tohtml -default -endpage ../mpi2-forum-tail.htm -basedef ../mpi2defs.txt -numbers -indexname myindex -dosnl -htables -quietlatex mpi2-report.tex 
-->
<TITLE>True Extent of Datatypes</TITLE>
<BODY BGCOLOR="#FFFFFF">
<HR><H2><A NAME="Node78">4.14.3. True Extent of Datatypes</a></H2>
<A HREF="node77.htm#Node77"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node75.htm#Node75"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node79.htm#Node79"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node75.htm#Node75"> New Datatype Manipulation Functions</a>
<b>Next: </b><A HREF="node79.htm#Node79"> Subarray Datatype Constructor</a>
<b>Previous: </b><A HREF="node77.htm#Node77"> Extent and Bounds of Datatypes</a>
<P>
  
Suppose we implement gather as a spanning tree implemented on top of  
point-to-point routines.  Since the receive buffer is only valid on the  
root process, one will need to allocate some temporary space for  
receiving data on intermediate nodes.  However, the datatype extent  
cannot be used as an estimate of the amount of space that needs to be  
allocated, if the user has modified the extent  
using the  MPI_UB and  MPI_LB values.  
A new function is provided which returns  
the true extent of the datatype.  
  
<P> 
<TABLE><TR><TD COLSPAN=2>MPI_TYPE_GET_TRUE_EXTENT(datatype, true_lb, true_extent)</TD></TR>  
<TR><TD> IN datatype</TD><TD>datatype to get information on (handle)</TD></TR>  
<TR><TD> OUT true_lb</TD><TD>true lower bound of datatype (integer)</TD></TR>  
<TR><TD> OUT true_extent</TD><TD>true size of datatype (integer)</TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_Type_get_true_extent(MPI_Datatype datatype, MPI_Aint *true_lb, MPI_Aint *true_extent) <BR></tt>  
<P> 
 <tt> MPI_TYPE_GET_TRUE_EXTENT(DATATYPE, TRUE_LB, TRUE_EXTENT, IERROR)<BR> INTEGER DATATYPE,  IERROR<BR>INTEGER(KIND = MPI_ADDRESS_KIND) TRUE_LB, TRUE_EXTENT <BR></tt>  
<P> 
  
<P> 
 <tt> void MPI::Datatype::Get_true_extent(MPI::Aint&amp; true_lb, MPI::Aint&amp; true_extent) const <BR></tt>  
<P> 
 true_lb returns the offset of the lowest unit of store which  
is addressed by the datatype, i.e., the lower bound of the  
corresponding typemap, ignoring  MPI_LB markers.  
 true_extent returns the  
true size of  
the datatype, i.e., the extent of the corresponding typemap, ignoring  
 MPI_LB and  MPI_UB markers, and performing no  
rounding for alignment.  If the typemap associated with  
 datatype is  
<p><I> 
Typemap = { (type<SUB>0</SUB>, disp<SUB>0</SUB>), ... , (type<SUB>n-1</SUB>, disp<SUB>n-1</SUB>)} 
</I><p>  
Then  
  
<P><IMG WIDTH=247 HEIGHT=11 SRC="img2.gif"><P>
  
<P><IMG WIDTH=329 HEIGHT=11 SRC="img3.gif"><P>
  
  
and  
<p><I> 
true_extent (Typemap) = true_ub(Typemap) - true_lb(typemap). 
</I><p>  
(Readers should compare this with the definitions in Section 3.12.3 of the  
 MPI-1 standard, which describes the function  MPI_TYPE_EXTENT.)  
<P> 
The  true_extent is the minimum number of bytes of  
memory necessary to hold a datatype, uncompressed.  
  
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
 <P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
<P> 
  

<P>
<HR>
<A HREF="node77.htm#Node77"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node75.htm#Node75"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node79.htm#Node79"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node75.htm#Node75"> New Datatype Manipulation Functions</a>
<b>Next: </b><A HREF="node79.htm#Node79"> Subarray Datatype Constructor</a>
<b>Previous: </b><A HREF="node77.htm#Node77"> Extent and Bounds of Datatypes</a>
<P>
<HR>
Return to <A HREF="node306.htm">MPI-2 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/docs/mpi-11-html/node182.html">MPI 1.1 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>MPI-2.0 of July 18, 1997<BR>
HTML Generated on September 10, 2001
</FONT>
</BODY>
</HTML>
