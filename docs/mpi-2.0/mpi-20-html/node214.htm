<HTML>
<!-- This file was generated by tohtml from io-2.tex -->
<!-- with the command
tohtml -default -endpage ../mpi2-forum-tail.htm -basedef ../mpi2defs.txt -numbers -indexname myindex -dosnl -htables -quietlatex mpi2-report.tex 
-->
<TITLE>File Size</TITLE>
<BODY BGCOLOR="#FFFFFF">
<HR><H2><A NAME="Node214">9.6.9. File Size</a></H2>
<A HREF="node213.htm#Node213"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node205.htm#Node205"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node215.htm#Node215"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node205.htm#Node205"> Consistency and Semantics</a>
<b>Next: </b><A HREF="node215.htm#Node215"> Examples</a>
<b>Previous: </b><A HREF="node213.htm#Node213"> Logical vs. Physical File Layout</a>
<P>
  
<P> 
The size of a file may be increased by writing to the file after the  
current end of file.  The size may also be changed by calling  
 MPI <em> size changing</em> routines,   
such as  MPI_FILE_SET_SIZE.  A call to a size changing routine   
does not necessarily change the file size.  For example, calling  
 MPI_FILE_PREALLOCATE with a size less than the current size does  
not change the size.  
<P> 
Consider a set of bytes that has been written to a file since  
the most recent call to a size changing routine,   
or since  MPI_FILE_OPEN if no such routine has been called.  
Let the <em> high byte</em> be the byte  
in that set with the largest displacement.  The file size  
is the larger of  
<ul> 
 
<li>One plus the displacement of the high byte.  
 
<li>The size immediately after the size changing routine,  
        or  MPI_FILE_OPEN, returned.  
</ul> 
<BR> 
When applying consistency semantics,  
calls to  MPI_FILE_SET_SIZE and  MPI_FILE_PREALLOCATE  
are considered writes to the file  
(which conflict with operations that access bytes  
at displacements between the old and new file sizes),  
and  MPI_FILE_GET_SIZE is considered a read of the file  
(which overlaps with all accesses to the file).  
  
<P> 
 
<BR> 
<em> Advice to users.</em>  
<P> 
Any sequence of operations containing the collective routines  
 MPI_FILE_SET_SIZE and  MPI_FILE_PREALLOCATE  
is a write sequence.  
As such, sequential consistency in nonatomic mode is not   
guaranteed unless the conditions in Section <a href="node206.htm#Node206">File Consistency 
</a>,  
are satisfied.  
 (<em> End of advice to users.</em>) <BR> 
File pointer update semantics (i.e., file pointers are   
updated by the amount accessed) are only guaranteed if file size  
changes are sequentially consistent.  
<P> 
 
<BR> 
<em> Advice to users.</em>  
<P> 
Consider the following example.  Given two operations made by  
separate processes to a file containing 100 bytes:  an   
 MPI_FILE_READ of 10 bytes and an  MPI_FILE_SET_SIZE to 0  
bytes.  If the user does not enforce sequential consistency   
between these two operations,  
the file pointer may be updated by the amount  
requested (10 bytes) even if the amount accessed is zero bytes.  
  
 (<em> End of advice to users.</em>) <BR> 
  
<P> 
  

<P>
<HR>
<A HREF="node213.htm#Node213"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node205.htm#Node205"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node215.htm#Node215"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node205.htm#Node205"> Consistency and Semantics</a>
<b>Next: </b><A HREF="node215.htm#Node215"> Examples</a>
<b>Previous: </b><A HREF="node213.htm#Node213"> Logical vs. Physical File Layout</a>
<P>
<HR>
Return to <A HREF="node306.htm">MPI-2 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/docs/mpi-11-html/node182.html">MPI 1.1 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>MPI-2.0 of July 18, 1997<BR>
HTML Generated on September 10, 2001
</FONT>
</BODY>
</HTML>
