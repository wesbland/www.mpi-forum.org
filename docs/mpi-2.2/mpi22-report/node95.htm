<HTML>
<HEAD>
<!-- This file was generated by tohtml from chap-coll/coll.tex -->
<!-- with the command
tohtml erif"> MPI-2.0</font>
-->
<TITLE>Gather</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<HR><H1><A NAME="Node95">94. Gather</a></H1>
<A HREF="node94.htm#Node94"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="mpi22-report.htm#Node0"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node96.htm#Node96"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="mpi22-report.htm#Node0">Contents</a>
<b>Next: </b><A HREF="node96.htm#Node96"> Examples using <font face="sans-serif"> MPI_GATHER</font>, <font face="sans-serif"> MPI_GATHERV</font></a>
<b>Previous: </b><A HREF="node94.htm#Node94"> Example using <font face="sans-serif"> MPI_BCAST</font></a>
<P>
  
<P> 
<TABLE><TR><TD COLSPAN=2>MPI_GATHER( sendbuf, sendcount, sendtype, recvbuf,  
recvcount, recvtype, root, comm) </TD></TR>  
<TR><TD> IN  sendbuf</TD><TD> starting address of send buffer (choice)</TD></TR>  
<TR><TD> IN  sendcount</TD><TD> number of elements in send buffer (non-negative  
integer)</TD></TR>  
<TR><TD> IN  sendtype</TD><TD> data type of send buffer elements (handle)</TD></TR>  
<TR><TD> OUT  recvbuf</TD><TD> address of receive buffer (choice,  
significant only at root)</TD></TR>  
<TR><TD> IN  recvcount</TD><TD> number of elements for any single receive (non-negative  
integer, significant only at root)</TD></TR>  
<TR><TD> IN  recvtype</TD><TD> data type of recv buffer elements  
(significant only at root) (handle)</TD></TR>  
<TR><TD> IN  root</TD><TD> rank of receiving process (integer)</TD></TR>  
<TR><TD> IN  comm</TD><TD> communicator (handle)</TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_Gather(void* sendbuf, int sendcount, MPI_Datatype sendtype, void* recvbuf, int recvcount, MPI_Datatype recvtype, int root, MPI_Comm comm)  <BR></tt>  
<P> 
 <tt> MPI_GATHER(SENDBUF, SENDCOUNT, SENDTYPE, RECVBUF, RECVCOUNT, RECVTYPE, ROOT, COMM, IERROR) <BR> &lt;type&gt; SENDBUF(*), RECVBUF(*) <BR>INTEGER SENDCOUNT, SENDTYPE, RECVCOUNT, RECVTYPE, ROOT, COMM, IERROR <BR></tt>  
  
  
 <font color="red">{<font color="black"> void MPI::Comm::Gather(const void* sendbuf, int sendcount,  const MPI::Datatype&amp; sendtype, void* recvbuf, int recvcount,  const MPI::Datatype&amp; recvtype, int root) const = 0 <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
  
  
<P> 
If <font face="sans-serif"> comm</font> is an intracommunicator,   
each process (root process included) sends the contents of its send  
buffer to the root process.  The root process receives the messages and  
stores them in rank order.  
The outcome is <em> as if</em> each of the <tt> n</tt> processes in the group  
(including the root process) had executed a call to  
<p><I> 
MPI_Send(sendbuf, sendcount, sendtype, root , ...), 
</I><p>  
and the  
root had executed <tt> n</tt> calls to  
<p><I> 
MPI_Recv(recvbuf+i&#183; recvcount&#183; extent(recvtype), recvcount, recvtype, i,...), 
</I><p>  
where <tt> extent(recvtype)</tt> is the type extent obtained from a call to  
<tt> MPI_Type_<font color="red">get_<font color="black">extent()</tt>.  
An alternative description is that the <tt> n</tt> messages sent by the  
processes in the group are concatenated in rank order, and the  
resulting message is received by the root as if by a call to  
<font face="sans-serif"> MPI_RECV(recvbuf, recvcount<I>&#183;</I>n, recvtype, ...)</font>.  
<P> 
The receive buffer is ignored for all non-root processes.  
<P> 
General, derived datatypes are allowed for both <font face="sans-serif"> sendtype</font>  
and <font face="sans-serif"> recvtype</font>.  
The type signature of <font face="sans-serif"> sendcount, sendtype</font> on  
each process  
must be equal to the type signature of  
<font face="sans-serif"> recvcount, recvtype</font> at the root.  
This implies that the amount of data sent must be equal to the  
amount of data received, pairwise between each process and the root.  
Distinct type maps between sender and receiver are still allowed.  
<P> 
All arguments to the function are significant on process <font face="sans-serif"> root</font>,  
while on other processes, only arguments <font face="sans-serif"> sendbuf, sendcount,  
sendtype, root</font>,  
and  
<font face="sans-serif"> comm</font> are significant.  
The arguments <font face="sans-serif"> root</font> and <font face="sans-serif"> comm</font>  
must have identical values on all processes.  
<P> 
The specification of counts and types  
should not cause any location on the root to be written more than  
once.  Such a call is erroneous.  
<P> 
Note that the <font face="sans-serif"> recvcount</font> argument at the root indicates  
the number of items it receives from <em> each</em> process, not the total number  
of items it receives.  
  
The ``in place'' option  for intracommunicators is specified by passing  
<font face="sans-serif">  MPI_IN_PLACE</font> as   
the value of <font face="sans-serif"> sendbuf</font> at the root.  In such a case,  
<font face="sans-serif"> sendcount</font> and <font face="sans-serif"> sendtype</font> are ignored, and the  
contribution of the root to the gathered vector is assumed to be already  
in the correct place in the receive buffer.  
<P> 
If <font face="sans-serif"> comm</font> is an intercommunicator, then the call involves all   
processes in the intercommunicator, but with one group (group A) defining the  
root process.  All processes in the other group (group B) pass the same value  
in argument   
<font face="sans-serif"> root</font>, which is the rank of the root in group A.  The root  
passes the value <font face="sans-serif">  MPI_ROOT</font> in <font face="sans-serif"> root</font>.  
All other processes in group A pass the value <font face="sans-serif">  MPI_PROC_NULL</font> in  
<font face="sans-serif"> root</font>.   
Data is gathered from all processes in group B to the root.  
The send  
buffer arguments of the processes in group B must be consistent with  
the receive buffer argument of the root.  
  
<TABLE><TR><TD COLSPAN=2>MPI_GATHERV( sendbuf, sendcount, sendtype, recvbuf,  
recvcounts, displs, recvtype, root, comm) </TD></TR>  
<TR><TD> IN  sendbuf</TD><TD> starting address of send buffer (choice)</TD></TR>  
<TR><TD> IN  sendcount</TD><TD> number of elements in send buffer (non-negative  
integer)</TD></TR>  
<TR><TD> IN  sendtype</TD><TD> data type of send buffer elements (handle)</TD></TR>  
<TR><TD> OUT  recvbuf</TD><TD> address of receive buffer (choice,  
significant only at root)</TD></TR>  
<TR><TD> IN  recvcounts</TD><TD>non-negative  
integer array (of length group size)  
containing the number of elements that are received from each process  
(significant only at root)</TD></TR>  
<TR><TD> IN  displs</TD><TD> integer array (of length group size).  Entry  
<tt> i</tt> specifies the displacement relative to <font face="sans-serif"> recvbuf</font> at  
which to place the incoming data from process <tt> i</tt> (significant only  
at root)</TD></TR>  
<TR><TD> IN  recvtype</TD><TD> data type of recv buffer elements  
(significant only at root) (handle)</TD></TR>  
<TR><TD> IN  root</TD><TD> rank of receiving process (integer)</TD></TR>  
<TR><TD> IN  comm</TD><TD> communicator (handle)</TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_Gatherv(void* sendbuf, int sendcount, MPI_Datatype sendtype, void* recvbuf, int *recvcounts, int *displs, MPI_Datatype recvtype, int root, MPI_Comm comm)  <BR></tt>  
<P> 
 <tt> MPI_GATHERV(SENDBUF, SENDCOUNT, SENDTYPE, RECVBUF, RECVCOUNTS, DISPLS, RECVTYPE, ROOT, COMM, IERROR) <BR> &lt;type&gt; SENDBUF(*), RECVBUF(*) <BR>INTEGER SENDCOUNT, SENDTYPE, RECVCOUNTS(*), DISPLS(*), RECVTYPE, ROOT, COMM, IERROR <BR></tt>  
  
  
 <font color="red">{<font color="black"> void MPI::Comm::Gatherv(const void* sendbuf, int sendcount,  const MPI::Datatype&amp; sendtype, void* recvbuf, const int recvcounts[], const int displs[], const MPI::Datatype&amp; recvtype, int root) const = 0 <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
  
  
<P> 
<font face="sans-serif"> MPI_GATHERV</font> extends the functionality of <font face="sans-serif"> MPI_GATHER</font>  
by allowing a varying count of data from each process, since  
<font face="sans-serif"> recvcounts</font>  
is now an array.  It also allows more flexibility as to where the data  
is placed on the root, by providing the new argument, <font face="sans-serif"> displs</font>.  
<P> 
If <font face="sans-serif"> comm</font> is an intracommunicator,   
the outcome is <em> as if</em> each process, including the root process,  
sends a message to the root,  
<p><I> 
MPI_Send(sendbuf, sendcount, sendtype, root, ...), 
</I><p>  
and the root executes <tt> n</tt> receives,  
  
<P><IMG WIDTH=402 HEIGHT=11 SRC="img56.gif"><P>
  
<P> 
The   
data received from process <font face="sans-serif"> j</font> is placed into <font face="sans-serif"> recvbuf</font> of the <font face="sans-serif"> root</font>  
process beginning at offset <font face="sans-serif"> displs[j]</font> elements (in terms of the  
<font face="sans-serif"> recvtype</font>).  
  
The receive buffer is ignored for all non-root processes.  
<P> 
The type signature implied by <font face="sans-serif"> sendcount, sendtype</font> on process <tt> i</tt>  
must be equal to the type signature implied by <font face="sans-serif"> recvcounts[i], recvtype</font>  
at the root.  
This implies that the amount of data sent must be equal to the  
amount of data received, pairwise between each process and the root.  
Distinct type maps between sender and receiver are still allowed,  
as illustrated in Example <a href="node96.htm#Node96">Examples using <font face="sans-serif"> MPI_GATHER</font>, <font face="sans-serif"> MPI_GATHERV</font> 
</a>.  
<P> 
All arguments to the function are significant on process <font face="sans-serif"> root</font>,  
while on other processes, only arguments <font face="sans-serif"> sendbuf, sendcount,  
sendtype, root</font>,  
and  
<font face="sans-serif"> comm</font> are significant.  
The arguments <font face="sans-serif"> root</font> and <font face="sans-serif"> comm</font>  
must have identical values on all processes.  
<P> 
The specification of counts, types, and displacements  
should not cause any location on the root to be written more than  
once.  Such a call is erroneous.  
  
The ``in place'' option  for intracommunicators is specified by passing  
<font face="sans-serif">  MPI_IN_PLACE</font> as   
the value of <font face="sans-serif"> sendbuf</font> at the root.  In such a case,  
<font face="sans-serif"> sendcount</font> and <font face="sans-serif"> sendtype</font> are ignored, and the  
contribution of the root to the gathered vector is assumed to be already  
in the correct place in the receive buffer  
<P> 
If <font face="sans-serif"> comm</font> is an intercommunicator, then the call involves all   
processes in the intercommunicator, but with one group (group A) defining the  
root process.  All processes in the other group (group B) pass the same value  
in argument   
<font face="sans-serif"> root</font>, which is the rank of the root in group A.  The root  
passes the value <font face="sans-serif">  MPI_ROOT</font> in <font face="sans-serif"> root</font>.  
All other processes in group A pass the value <font face="sans-serif">  MPI_PROC_NULL</font> in  
<font face="sans-serif"> root</font>.   
Data is gathered from all processes in group B to the root.  
The send  
buffer arguments of the processes in group B must be consistent with  
the receive buffer argument of the root.  
  
<menu> 
</menu> 

<P>
<HR>
<A HREF="node94.htm#Node94"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="mpi22-report.htm#Node0"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node96.htm#Node96"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="mpi22-report.htm#Node0">Contents</a>
<b>Next: </b><A HREF="node96.htm#Node96"> Examples using <font face="sans-serif"> MPI_GATHER</font>, <font face="sans-serif"> MPI_GATHERV</font></a>
<b>Previous: </b><A HREF="node94.htm#Node94"> Example using <font face="sans-serif"> MPI_BCAST</font></a>
<P>
<HR>
Return to <A HREF="node434.htm">MPI-2.2 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-2.2 of September 4, 2009<BR>
HTML Generated on September 10, 2009
</FONT>
</BODY>
</HTML>
