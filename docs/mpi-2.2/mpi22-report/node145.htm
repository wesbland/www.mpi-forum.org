<HTML>
<HEAD>
<!-- This file was generated by tohtml from chap-context/context.tex -->
<!-- with the command
tohtml erif"> MPI-2.0</font>
-->
<TITLE>Inter-communicator Operations</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<HR><H2><A NAME="Node145">143. Inter-communicator Operations</a></H2>
<A HREF="node144.htm#Node144"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node143.htm#Node143"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node146.htm#Node146"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node143.htm#Node143"> Inter-Communication</a>
<b>Next: </b><A HREF="node146.htm#Node146"> Inter-Communication Examples</a>
<b>Previous: </b><A HREF="node144.htm#Node144"> Inter-communicator Accessors</a>
<P>
  
<P> 
This section introduces four blocking inter-communicator operations.  
<font face="sans-serif"> MPI_INTERCOMM_CREATE</font> is used to bindtwo intra-communicators into an inter-communicator; the function  
<font face="sans-serif"> MPI_INTERCOMM_MERGE</font> creates an intra-communicator by  
merging the local and remote groups of an inter-communicator.  The  
functions <BR><font face="sans-serif"> MPI_COMM_DUP</font> and  
<BR><font face="sans-serif"> MPI_COMM_FREE</font>, introduced previously,  
duplicate and free an inter-communicator, respectively.  
<P> 
Overlap of local and remote groups that are bound into an  
inter-communicator is prohibited.  If there is overlap, then the  
program is erroneous and is likely to deadlock.  (If a process is  
multithreaded, and <font face="sans-serif"> MPI</font> calls block only a thread, rather than a  
process, then ``dual membership'' can be supported.  It is then the  
user's responsibility to make sure that calls on behalf of the two  
``roles'' of a process are executed by two independent threads.)  
<P> 
The function <font face="sans-serif"> MPI_INTERCOMM_CREATE</font> can be used to create an  
inter-communicator from two existing intra-communicators, in the following  
situation: At least one selected member from each group (the ``group  
leader'') has the ability to communicate with the selected member from  
the other group; that is, a ``peer'' communicator exists to which both  
leaders belong, and each leader knows the rank of the other leader in  
this peer communicator.  
Furthermore, members of each group know the rank of their leader.  
<P> 
Construction of an inter-communicator from two intra-communicators requires  
separate collective operations in the local group and in the remote group, as  
well as a point-to-point communication between a process in the local group  
and a process in the remote group.  
<P> 
In standard <font face="sans-serif"> MPI</font> implementations (with static process allocation  
at initialization), the <font face="sans-serif">  MPI_COMM_WORLD</font>  
communicator (or preferably a dedicated duplicate thereof)  
can be this peer communicator.    
For applications that have used spawn or join, it may be necessary  
to first create an intracommunicator to be used as peer.  
  
The application topology functions described in Chapter <a href="node163.htm#Node163">Process Topologies 
</a> do  
not apply to inter-communicators.  Users that require this capability should  
utilize <font face="sans-serif"> MPI_INTERCOMM_MERGE</font> to build an intra-communicator, then  
apply the graph or cartesian topology capabilities to that intra-communicator,  
creating an appropriate topology-oriented intra-communicator.  Alternatively,  
it may be reasonable to devise one's own application topology mechanisms for  
this case, without loss of generality.  
<P> 
  
<P><IMG WIDTH=386 HEIGHT=200 SRC="img107.gif"><P>
  
<P> 
 <tt> int MPI_Intercomm_create(MPI_Comm local_comm, int local_leader, MPI_Comm peer_comm, int remote_leader, int tag, MPI_Comm *newintercomm) <BR></tt>  
<P> 
 <tt> MPI_INTERCOMM_CREATE(LOCAL_COMM, LOCAL_LEADER, PEER_COMM, REMOTE_LEADER, TAG, NEWINTERCOMM, IERROR)<BR> INTEGER LOCAL_COMM, LOCAL_LEADER, PEER_COMM, REMOTE_LEADER, TAG, NEWINTERCOMM, IERROR <BR></tt>  
 <font color="red">{<font color="black"> MPI::Intercomm MPI::Intracomm::Create_intercomm(int local_leader, const MPI::Comm&amp; peer_comm, int remote_leader, int tag) const <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
  
 This call creates an inter-communicator.  It is collective  
over the union of the local and remote groups.  Processes should  
provide identical <font face="sans-serif"> local_comm</font> and <font face="sans-serif"> local_leader</font>  
arguments within each group.  
Wildcards are not permitted for  
<font face="sans-serif"> remote_leader, local_leader</font>, and <font face="sans-serif"> tag</font>.  
<P> 
This call uses point-to-point communication with communicator  
<font face="sans-serif"> peer_comm</font>, and with tag <font face="sans-serif"> tag</font> between the leaders.  
Thus, care must be taken that there be no pending communication on  
<font face="sans-serif"> peer_comm</font> that could interfere with this communication.  
<P> 
 
<BR> 
<em> Advice to users.</em>  
<P> 
We recommend using a dedicated peer communicator, such as a duplicate  
of <font face="sans-serif">  MPI_COMM_WORLD</font>, to avoid trouble with peer communicators.  
 (<em> End of advice to users.</em>) <BR> 
<TABLE><TR><TD COLSPAN=2>MPI_INTERCOMM_MERGE(intercomm, high, newintracomm)</TD></TR>  
<TR><TD> IN intercomm</TD><TD>Inter-Communicator (handle) </TD></TR>  
<TR><TD> IN high</TD><TD>(logical)</TD></TR>  
<TR><TD> OUT newintracomm</TD><TD>  new intra-communicator (handle) </TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_Intercomm_merge(MPI_Comm intercomm, int high, MPI_Comm *newintracomm) <BR></tt>  
<P> 
 <tt> MPI_INTERCOMM_MERGE(INTERCOMM, HIGH, INTRACOMM, IERROR)<BR> INTEGER INTERCOMM, INTRACOMM, IERROR <BR>LOGICAL HIGH <BR></tt>  
 <font color="red">{<font color="black"> MPI::Intracomm MPI::Intercomm::Merge(bool high) const <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
  
 This  
function creates an intra-communicator from the union of  
the two groups that are associated with <font face="sans-serif"> intercomm</font>.  
All processes  should provide the same  
<font face="sans-serif"> high</font> value within each of the two groups.  If processes in one group  
provided the value <font face="sans-serif"> high = false</font> and processes in the other group  
provided the value <font face="sans-serif"> high = true</font> then the union orders the ``low'' group  
before the ``high'' group.  If all processes provided the same <font face="sans-serif"> high</font>  
argument then the order of the union is arbitrary.  
This call is blocking and collective within the union of  
the two groups.  
<P> 
  
The error handler on the new intercommunicator in each process is inherited  
from the communicator that contributes the local group.  Note that this can  
result in different processes in the same communicator having different error  
handlers.  
<P> 
 
<BR> 
<em> Advice  
        to implementors.</em>  
 The implementation of  
<font face="sans-serif"> MPI_INTERCOMM_MERGE</font>,  
<BR>  
<font face="sans-serif"> MPI_COMM_FREE</font> and <font face="sans-serif"> MPI_COMM_DUP</font> are  
similar to the implementation of <BR>  
<font face="sans-serif"> MPI_INTERCOMM_CREATE</font>, except  
that contexts private to the input inter-communicator  
are used for  
communication between group leaders rather than contexts inside a  
bridge communicator.   (<em> End of advice to implementors.</em>) <BR> 

<P>
<HR>
<A HREF="node144.htm#Node144"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node143.htm#Node143"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node146.htm#Node146"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node143.htm#Node143"> Inter-Communication</a>
<b>Next: </b><A HREF="node146.htm#Node146"> Inter-Communication Examples</a>
<b>Previous: </b><A HREF="node144.htm#Node144"> Inter-communicator Accessors</a>
<P>
<HR>
Return to <A HREF="node434.htm">MPI-2.2 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-2.2 of September 4, 2009<BR>
HTML Generated on September 10, 2009
</FONT>
</BODY>
</HTML>
