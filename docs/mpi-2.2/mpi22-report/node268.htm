<HTML>
<HEAD>
<!-- This file was generated by tohtml from chap-io/io-2.tex -->
<!-- with the command
tohtml erif"> MPI-2.0</font>
-->
<TITLE>Resizing a File</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<HR><H2><A NAME="Node268">253. Resizing a File</a></H2>
<A HREF="node267.htm#Node267"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node264.htm#Node264"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node269.htm#Node269"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node264.htm#Node264"> File Manipulation</a>
<b>Next: </b><A HREF="node269.htm#Node269"> Preallocating Space for a File</a>
<b>Previous: </b><A HREF="node267.htm#Node267"> Deleting a File</a>
<P>
  
<P> 
<TABLE><TR><TD COLSPAN=2>MPI_FILE_SET_SIZE(fh, size)</TD></TR>  
<TR><TD> INOUT fh</TD><TD>file handle (handle)</TD></TR>  
<TR><TD> IN size</TD><TD>size to truncate or expand file (integer)</TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_File_set_size(MPI_File fh, MPI_Offset size) <BR></tt>  
 <tt> MPI_FILE_SET_SIZE(FH, SIZE, IERROR)<BR> INTEGER FH, IERROR <BR>INTEGER(KIND=MPI_OFFSET_KIND) SIZE <BR></tt>  
 <font color="red">{<font color="black"> void MPI::File::Set_size(MPI::Offset size) <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
<P> 
<font face="sans-serif"> MPI_FILE_SET_SIZE</font> resizes the file  
associated with the file handle <font face="sans-serif"> fh</font>.  
<font face="sans-serif"> size</font> is measured in bytes from the beginning of the file.  
  
<font face="sans-serif"> MPI_FILE_SET_SIZE</font> is collective;  
all processes in the group must pass identical values for <font face="sans-serif"> size</font>.  
<P> 
  
  
If <font face="sans-serif"> size</font> is smaller than the current file size,  
the file is truncated at the position defined by <font face="sans-serif"> size</font>.  
The implementation is free to deallocate file blocks located  
beyond this position.  
<P> 
If <font face="sans-serif"> size</font> is larger than the current file size,  
the file size becomes <font face="sans-serif"> size</font>.  
Regions of the file that have been previously written are unaffected.  
  
The values of data in the new regions in the file (those  
locations with displacements between old file size and <font face="sans-serif"> size</font>)  
are undefined.  
  
  
It is implementation dependent whether the <font face="sans-serif"> MPI_FILE_SET_SIZE</font> routine  
allocates file space---use <font face="sans-serif"> MPI_FILE_PREALLOCATE</font>  
to force file space to be reserved.  
<P> 
<font face="sans-serif"> MPI_FILE_SET_SIZE</font> does not affect the individual file pointers  
or the shared file pointer.  
If <font face="sans-serif">  MPI_MODE_SEQUENTIAL</font> mode was specified when the file was opened,  
it is erroneous to call this routine.  
<P> 
 
<BR> 
<em> Advice to users.</em>  
<P> 
It is possible for the file pointers to point beyond the end of file  
after a <font face="sans-serif"> MPI_FILE_SET_SIZE</font> operation truncates a file.  
This is legal, and equivalent to seeking beyond the current end of file.  
 (<em> End of advice to users.</em>) <BR> 
All nonblocking requests  
and split collective operations  
on <font face="sans-serif"> fh</font> must be completed  
before calling <font face="sans-serif"> MPI_FILE_SET_SIZE</font>.  
Otherwise, calling <font face="sans-serif"> MPI_FILE_SET_SIZE</font> is erroneous.  
As far as consistency semantics are concerned,  
<font face="sans-serif"> MPI_FILE_SET_SIZE</font> is a write operation  
that conflicts with operations that access bytes  
at displacements between the old and new file sizes  
(see Section <a href="node296.htm#Node296">File Consistency 
</a>,  
page <a href="node296.htm#Node296">File Consistency 
</a>).  
  
<P> 

<P>
<HR>
<A HREF="node267.htm#Node267"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node264.htm#Node264"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node269.htm#Node269"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node264.htm#Node264"> File Manipulation</a>
<b>Next: </b><A HREF="node269.htm#Node269"> Preallocating Space for a File</a>
<b>Previous: </b><A HREF="node267.htm#Node267"> Deleting a File</a>
<P>
<HR>
Return to <A HREF="node434.htm">MPI-2.2 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-2.2 of September 4, 2009<BR>
HTML Generated on September 10, 2009
</FONT>
</BODY>
</HTML>
