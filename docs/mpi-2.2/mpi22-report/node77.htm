<HTML>
<HEAD>
<!-- This file was generated by tohtml from chap-datatypes/datatypes.tex -->
<!-- with the command
tohtml erif"> MPI-2.0</font>
-->
<TITLE>True Extent of Datatypes</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<HR><H2><A NAME="Node77">76. True Extent of Datatypes</a></H2>
<A HREF="node76.htm#Node76"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node69.htm#Node69"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node78.htm#Node78"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node69.htm#Node69"> Derived Datatypes</a>
<b>Next: </b><A HREF="node78.htm#Node78"> Commit and Free</a>
<b>Previous: </b><A HREF="node76.htm#Node76"> Extent and Bounds of Datatypes</a>
<P>
  
Suppose we implement gather   
(see also Section <a href="node95.htm#Node95">Gather 
</a> on page <a href="node95.htm#Node95">Gather 
</a>)   
as a spanning tree implemented on top of  
point-to-point routines.  Since the receive buffer is only valid on the  
root process, one will need to allocate some temporary space for  
receiving data on intermediate nodes.  However, the datatype extent  
cannot be used as an estimate of the amount of space that needs to be  
allocated, if the user has modified the extent  
using the <font face="sans-serif">  MPI_UB</font> and <font face="sans-serif">  MPI_LB</font> values.  
A  
function is provided which returns  
the true extent of the datatype.  
  
<P> 
<TABLE><TR><TD COLSPAN=2>MPI_TYPE_GET_TRUE_EXTENT(datatype, true_lb, true_extent)</TD></TR>  
<TR><TD> IN datatype</TD><TD>datatype to get information on (handle)</TD></TR>  
<TR><TD> OUT true_lb</TD><TD>true lower bound of datatype (integer)</TD></TR>  
<TR><TD> OUT true_extent</TD><TD>true size of datatype (integer)</TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_Type_get_true_extent(MPI_Datatype datatype, MPI_Aint *true_lb, MPI_Aint *true_extent) <BR></tt>  
<P> 
 <tt> MPI_TYPE_GET_TRUE_EXTENT(DATATYPE, TRUE_LB, TRUE_EXTENT, IERROR)<BR> INTEGER DATATYPE,  IERROR<BR>INTEGER(KIND = MPI_ADDRESS_KIND) TRUE_LB, TRUE_EXTENT <BR></tt>  
<P> 
  
<P> 
 <font color="red">{<font color="black"> void MPI::Datatype::Get_true_extent(MPI::Aint&amp; true_lb, MPI::Aint&amp; true_extent) const <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
<P> 
<font face="sans-serif"> true_lb</font> returns the offset of the lowest unit of store which  
is addressed by the datatype, i.e., the lower bound of the  
corresponding typemap, ignoring <font face="sans-serif">  MPI_LB</font> markers.  
<font face="sans-serif"> true_extent</font> returns the  
true size of  
the datatype, i.e., the extent of the corresponding typemap, ignoring  
<font face="sans-serif">  MPI_LB</font> and <font face="sans-serif"> MPI_UB</font> markers, and performing no  
rounding for alignment.  If the typemap associated with  
<font face="sans-serif"> datatype</font> is  
<p><I> 
Typemap = { (type<SUB>0</SUB>, disp<SUB>0</SUB>), ... , (type<SUB>n-1</SUB>, disp<SUB>n-1</SUB>)} 
</I><p>  
Then  
  
<P><IMG WIDTH=250 HEIGHT=12 SRC="img42.gif"><P>
  
<P><IMG WIDTH=332 HEIGHT=12 SRC="img43.gif"><P>
  
  
and  
<p><I> 
true_extent (Typemap) = true_ub(Typemap) - true_lb(typemap). 
</I><p>  
(Readers should compare this with the definitions in   
Section <a href="node75.htm#Node75">Lower-Bound and Upper-Bound Markers 
</a> on page <a href="node75.htm#Node75">Lower-Bound and Upper-Bound Markers 
</a> and  
Section <a href="node76.htm#Node76">Extent and Bounds of Datatypes 
</a> on page <a href="node76.htm#Node76">Extent and Bounds of Datatypes 
</a>,  
which describe   
the function   
<font face="sans-serif"> MPI_TYPE_GET_EXTENT</font>.)  
  
The <font face="sans-serif"> true_extent</font> is the minimum number of bytes of  
memory necessary to hold a datatype, uncompressed.  
  
  
<P> 

<P>
<HR>
<A HREF="node76.htm#Node76"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node69.htm#Node69"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node78.htm#Node78"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node69.htm#Node69"> Derived Datatypes</a>
<b>Next: </b><A HREF="node78.htm#Node78"> Commit and Free</a>
<b>Previous: </b><A HREF="node76.htm#Node76"> Extent and Bounds of Datatypes</a>
<P>
<HR>
Return to <A HREF="node434.htm">MPI-2.2 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-2.2 of September 4, 2009<BR>
HTML Generated on September 10, 2009
</FONT>
</BODY>
</HTML>
