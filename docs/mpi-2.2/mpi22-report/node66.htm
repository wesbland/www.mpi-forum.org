<HTML>
<HEAD>
<!-- This file was generated by tohtml from chap-pt2pt/pt2pt.tex -->
<!-- with the command
tohtml erif"> MPI-2.0</font>
-->
<TITLE>Send-Receive</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<HR><H1><A NAME="Node66">65. Send-Receive</a></H1>
<A HREF="node65.htm#Node65"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="mpi22-report.htm#Node0"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node67.htm#Node67"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="mpi22-report.htm#Node0">Contents</a>
<b>Next: </b><A HREF="node67.htm#Node67"> Null Processes</a>
<b>Previous: </b><A HREF="node65.htm#Node65"> Persistent Communication Requests</a>
<P>
  
<P> 
The <b> send-receive</b> operations combine in one call the sending of a  
message to one destination and the receiving of another message, from  
another process.  The two (source and destination) are possibly the same.  
A send-receive operation is  
very useful for executing a shift operation across a chain of  
processes.  If blocking sends and receives are used for such a shift,  
then one needs to order the sends and receives correctly (for  
example, even processes  
send, then receive, odd processes receive first, then send) so as to prevent  
cyclic dependencies that may lead to deadlock.  When a send-receive  
operation is used, the communication subsystem takes care of  
these issues.  The send-receive operation can be used in conjunction  
with the functions described in Chapter <a href="node163.htm#Node163">Process Topologies 
</a> in order to  
perform shifts on various logical topologies.  
Also, a send-receive operation is useful for implementing  
remote procedure calls.  
<P> 
A message sent by a  
send-receive operation can be received by a regular receive  
operation or probed by a probe operation; a send-receive operation can  
receive a message sent by a regular send operation.  
<P> 
<TABLE><TR><TD COLSPAN=2>MPI_SENDRECV(sendbuf, sendcount, sendtype, dest,  
sendtag, recvbuf, recvcount, recvtype, source, recvtag, comm, status)</TD></TR>  
<TR><TD> IN sendbuf</TD><TD>initial address of send buffer (choice)</TD></TR>  
<TR><TD> IN sendcount</TD><TD>number of elements in send buffer (non-negative  
integer)</TD></TR>  
<TR><TD> IN sendtype</TD><TD>type of elements in send buffer (handle)</TD></TR>  
<TR><TD> IN dest</TD><TD>rank of destination (integer)</TD></TR>  
<TR><TD> IN sendtag</TD><TD>send tag (integer)</TD></TR>  
<TR><TD> OUT recvbuf</TD><TD>initial address of receive buffer (choice)</TD></TR>  
<TR><TD> IN recvcount</TD><TD>number of elements in receive buffer (non-negative  
integer)</TD></TR>  
<TR><TD> IN recvtype</TD><TD> type of elements in receive buffer (handle)</TD></TR>  
<TR><TD> IN source</TD><TD>rank of source <font color="red">or <font face="sans-serif">  MPI_ANY_SOURCE</font><font color="black"> (integer)</TD></TR>  
<TR><TD> IN recvtag</TD><TD>receive tag <font color="red">or <font face="sans-serif">  MPI_ANY_TAG</font><font color="black"> (integer)</TD></TR>  
<TR><TD> IN comm</TD><TD>communicator (handle)</TD></TR>  
<TR><TD> OUT status</TD><TD>status object (Status)</TD></TR>  
</TABLE>  
<P> 
  
 <tt> int MPI_Sendrecv(void *sendbuf, int sendcount, MPI_Datatype sendtype, int dest, int sendtag, void *recvbuf, int recvcount, MPI_Datatype recvtype, int source, int recvtag, MPI_Comm comm, MPI_Status *status) <BR></tt>  
<P> 
 <tt> MPI_SENDRECV(SENDBUF, SENDCOUNT, SENDTYPE, DEST, SENDTAG, RECVBUF, RECVCOUNT, RECVTYPE, SOURCE, RECVTAG, COMM, STATUS, IERROR)<BR> &lt;type&gt; SENDBUF(*), RECVBUF(*) <BR>INTEGER  SENDCOUNT, SENDTYPE, DEST, SENDTAG, RECVCOUNT, RECVTYPE, SOURCE, RECVTAG, COMM, STATUS(MPI_STATUS_SIZE), IERROR <BR></tt>  
 <font color="red">{<font color="black"> void MPI::Comm::Sendrecv(const void *sendbuf, int sendcount, const MPI::Datatype&amp; sendtype, int dest, int sendtag, void *recvbuf, int recvcount, const MPI::Datatype&amp; recvtype, int source, int recvtag, MPI::Status&amp; status) const <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
 <font color="red">{<font color="black"> void MPI::Comm::Sendrecv(const void *sendbuf, int sendcount, const MPI::Datatype&amp; sendtype, int dest, int sendtag, void *recvbuf, int recvcount, const MPI::Datatype&amp; recvtype, int source, int recvtag) const <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
  
<P> 
Execute a blocking send and receive operation.  Both send and receive  
use the same communicator, but  
possibly different tags.  The send buffer and receive buffers must be  
disjoint, and may have different lengths and datatypes.  
<P> 
The semantics of a send-receive operation is what would be obtained  
if the caller forked two concurrent threads, one to execute the send,  
and one to execute the receive, followed by a join of these two  
threads.  
  
<TABLE><TR><TD COLSPAN=2>MPI_SENDRECV_REPLACE(buf, count, datatype, dest,  
sendtag, source, recvtag, comm, status)</TD></TR>  
<TR><TD> INOUT buf</TD><TD>initial address of send and receive buffer (choice)</TD></TR>  
<TR><TD> IN count</TD><TD>number of elements in send and receive buffer (non-negative  
integer)</TD></TR>  
<TR><TD> IN datatype</TD><TD>type of elements in send and receive buffer (handle)</TD></TR>  
<TR><TD> IN dest</TD><TD>rank of destination (integer)</TD></TR>  
<TR><TD> IN sendtag</TD><TD>send message tag (integer)</TD></TR>  
<TR><TD> IN source</TD><TD>rank of source <font color="red">or <font face="sans-serif">  MPI_ANY_SOURCE</font><font color="black"> (integer)</TD></TR>  
<TR><TD> IN recvtag</TD><TD>receive message tag <font color="red">or <font face="sans-serif">  MPI_ANY_TAG</font><font color="black"> (integer)</TD></TR>  
<TR><TD> IN comm</TD><TD>communicator (handle)</TD></TR>  
<TR><TD> OUT status</TD><TD>status object (Status)</TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_Sendrecv_replace(void* buf, int count, MPI_Datatype datatype, int dest, int sendtag, int source, int recvtag, MPI_Comm comm, MPI_Status *status) <BR></tt>  
<P> 
 <tt> MPI_SENDRECV_REPLACE(BUF, COUNT, DATATYPE, DEST, SENDTAG, SOURCE, RECVTAG, COMM, STATUS, IERROR)<BR> &lt;type&gt; BUF(*) <BR>INTEGER COUNT, DATATYPE, DEST, SENDTAG, SOURCE, RECVTAG, COMM, STATUS(MPI_STATUS_SIZE), IERROR <BR></tt>  
 <font color="red">{<font color="black"> void MPI::Comm::Sendrecv_replace(void* buf, int count, const MPI::Datatype&amp; datatype, int dest, int sendtag, int source, int recvtag, MPI::Status&amp; status) const <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
 <font color="red">{<font color="black"> void MPI::Comm::Sendrecv_replace(void* buf, int count, const MPI::Datatype&amp; datatype, int dest, int sendtag, int source, int recvtag) const <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
  
<P> 
Execute a blocking send and receive. The same buffer is used both for  
the send and for the receive, so that the message sent is replaced by  
the message received.  
<P> 
  
 
<BR> 
<em> Advice  
        to implementors.</em>  
<P> 
Additional intermediate buffering is needed for the  
``replace'' variant.  
 (<em> End of advice to implementors.</em>) <BR> 

<P>
<HR>
<A HREF="node65.htm#Node65"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="mpi22-report.htm#Node0"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node67.htm#Node67"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="mpi22-report.htm#Node0">Contents</a>
<b>Next: </b><A HREF="node67.htm#Node67"> Null Processes</a>
<b>Previous: </b><A HREF="node65.htm#Node65"> Persistent Communication Requests</a>
<P>
<HR>
Return to <A HREF="node434.htm">MPI-2.2 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-2.2 of September 4, 2009<BR>
HTML Generated on September 10, 2009
</FONT>
</BODY>
</HTML>
