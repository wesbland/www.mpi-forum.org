<HTML>
<HEAD>
<!-- This file was generated by tohtml from chap-context/context.tex -->
<!-- with the command
tohtml erif"> MPI-2.0</font>
-->
<TITLE>Datatypes</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<HR><H2><A NAME="Node153">149. Datatypes</a></H2>
<A HREF="node152.htm#Node152"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node149.htm#Node149"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node154.htm#Node154"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node149.htm#Node149"> Caching</a>
<b>Next: </b><A HREF="node154.htm#Node154"> Error Class for Invalid Keyval</a>
<b>Previous: </b><A HREF="node152.htm#Node152"> Windows</a>
<P>
  
<P> 
The new functions for caching on datatypes are:  
<P> 
  
<TABLE><TR><TD COLSPAN=2>MPI_TYPE_CREATE_KEYVAL(type_copy_attr_fn, type_delete_attr_fn, type_keyval, extra_state)</TD></TR>  
<TR><TD> IN type_copy_attr_fn</TD><TD>copy callback function for <font face="sans-serif"> type_keyval</font> (function)</TD></TR>  
<TR><TD> IN type_delete_attr_fn</TD><TD>delete callback function for <font face="sans-serif"> type_keyval</font> (function)</TD></TR>  
<TR><TD> OUT type_keyval</TD><TD>key value for future access (integer)</TD></TR>  
<TR><TD> IN extra_state</TD><TD>extra state for callback functions</TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_Type_create_keyval(MPI_Type_copy_attr_function *type_copy_attr_fn, MPI_Type_delete_attr_function *type_delete_attr_fn, int *type_keyval, void *extra_state) <BR></tt>  
<P> 
 <tt> MPI_TYPE_CREATE_KEYVAL(TYPE_COPY_ATTR_FN, TYPE_DELETE_ATTR_FN, TYPE_KEYVAL, EXTRA_STATE, IERROR)<BR> EXTERNAL TYPE_COPY_ATTR_FN, TYPE_DELETE_ATTR_FN<BR>INTEGER TYPE_KEYVAL, IERROR<BR>INTEGER(KIND=MPI_ADDRESS_KIND) EXTRA_STATE <BR></tt>  
<P> 
  
 <font color="red">{<font color="black"> static int MPI::Datatype::Create_keyval(MPI::Datatype::Copy_attr_function* type_copy_attr_fn, MPI::Datatype::Delete_attr_function* type_delete_attr_fn, void* extra_state) <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
  
<P> 
  
The argument <font face="sans-serif"> type_copy_attr_fn</font> may be specified as  
  
<font face="sans-serif"> MPI_TYPE_NULL_COPY_FN</font> or  
  
<font face="sans-serif"> MPI_TYPE_DUP_FN</font>  
from either C, C++, or Fortran.  
<font face="sans-serif"> MPI_TYPE_NULL_COPY_FN</font>  
is a function that does nothing other than returning <font face="sans-serif"> flag = 0</font>  
and <font face="sans-serif">  MPI_SUCCESS</font>.  
<font face="sans-serif"> MPI_TYPE_DUP_FN</font> is a simple-minded  
copy function that sets <font face="sans-serif"> flag = 1</font>,  
returns the value of  
<font face="sans-serif"> attribute_val_in</font> in <font face="sans-serif"> attribute_val_out</font>, and  
returns <font face="sans-serif">  MPI_SUCCESS</font>.  
<P> 
  
  
  
The argument <font face="sans-serif"> type_delete_attr_fn</font> may be specified as  
  
  
<font face="sans-serif"> MPI_TYPE_NULL_DELETE_FN</font> from either C, C++, or Fortran.  
<font face="sans-serif"> MPI_TYPE_NULL_DELETE_FN</font> is a function that does nothing, other  
than returning <font face="sans-serif">  MPI_SUCCESS</font>.    
<P> 
  
  
  
<P> 
The C callback functions are:  
<P> 
  
 <tt> typedef int MPI_Type_copy_attr_function(MPI_Datatype oldtype, int type_keyval, void *extra_state, void *attribute_val_in, void *attribute_val_out, int *flag); <BR></tt>  
<P> 
and  
<P> 
 <tt> typedef int MPI_Type_delete_attr_function(MPI_Datatype type, int type_keyval, void *attribute_val, void *extra_state); <BR></tt>  
  
<P> 
The Fortran callback functions are:  
<P> 
 <tt> SUBROUTINE TYPE_COPY_ATTR_FN(OLDTYPE, TYPE_KEYVAL, EXTRA_STATE, ATTRIBUTE_VAL_IN, ATTRIBUTE_VAL_OUT, FLAG, IERROR)<BR> INTEGER OLDTYPE, TYPE_KEYVAL, IERROR<BR>INTEGER(KIND=MPI_ADDRESS_KIND) EXTRA_STATE,<BR>    ATTRIBUTE_VAL_IN, ATTRIBUTE_VAL_OUT<BR>LOGICAL FLAG <BR></tt>  
<P> 
and  
<P> 
 <tt> SUBROUTINE TYPE_DELETE_ATTR_FN(TYPE, TYPE_KEYVAL, ATTRIBUTE_VAL, EXTRA_STATE, IERROR)<BR> INTEGER TYPE, TYPE_KEYVAL, IERROR<BR>INTEGER(KIND=MPI_ADDRESS_KIND) ATTRIBUTE_VAL, EXTRA_STATE <BR></tt>  
<P> 
The C++ callbacks are:  
<P> 
  
 <font color="red">{<font color="black"><tt> typedef int MPI::Datatype::Copy_attr_function(const MPI::Datatype&amp; oldtype, int type_keyval, void* extra_state, const void* attribute_val_in, void* attribute_val_out, bool&amp; flag); <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR></tt>  
<P> 
and  
<P> 
 <font color="red">{<font color="black"><tt> typedef int MPI::Datatype::Delete_attr_function(MPI::Datatype&amp; type, int type_keyval, void* attribute_val, void* extra_state); <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR></tt>  
  
  
  
If an attribute copy function or attribute delete function returns other than  
<font face="sans-serif">  MPI_SUCCESS</font>, then the call that caused it to be invoked (for example,  
<font face="sans-serif"> MPI_TYPE_FREE</font>), is erroneous.  
  
<TABLE><TR><TD COLSPAN=2>MPI_TYPE_FREE_KEYVAL(type_keyval)</TD></TR>  
<TR><TD> INOUT type_keyval</TD><TD>key value (integer)</TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_Type_free_keyval(int *type_keyval) <BR></tt>  
<P> 
 <tt> MPI_TYPE_FREE_KEYVAL(TYPE_KEYVAL, IERROR)<BR> INTEGER TYPE_KEYVAL, IERROR <BR></tt>   
<P> 
 <font color="red">{<font color="black"> static void MPI::Datatype::Free_keyval(int&amp; type_keyval) <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
<P> 
  
<TABLE><TR><TD COLSPAN=2>MPI_TYPE_SET_ATTR(type, type_keyval, attribute_val)</TD></TR>  
<TR><TD> INOUT type</TD><TD>datatype to which attribute will be attached (handle)</TD></TR>  
<TR><TD> IN type_keyval</TD><TD>key value (integer)</TD></TR>  
<TR><TD> IN attribute_val</TD><TD>attribute value</TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_Type_set_attr(MPI_Datatype type, int type_keyval, void *attribute_val) <BR></tt>  
 <P> 
 <tt> MPI_TYPE_SET_ATTR(TYPE, TYPE_KEYVAL, ATTRIBUTE_VAL, IERROR)<BR> INTEGER TYPE, TYPE_KEYVAL, IERROR<BR>INTEGER(KIND=MPI_ADDRESS_KIND) ATTRIBUTE_VAL <BR></tt>   
<P> 
 <font color="red">{<font color="black"> void MPI::Datatype::Set_attr(int type_keyval, const void* attribute_val) <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
  
<P> 
<TABLE><TR><TD COLSPAN=2>MPI_TYPE_GET_ATTR(type, type_keyval, attribute_val, flag)</TD></TR>  
<TR><TD> IN type</TD><TD>datatype to which the attribute is attached (handle)</TD></TR>  
<TR><TD> IN type_keyval</TD><TD>key value (integer)</TD></TR>  
<TR><TD> OUT attribute_val</TD><TD>attribute value, unless <font face="sans-serif"> flag =  
false</font></TD></TR>  
<TR><TD> OUT flag</TD><TD><font face="sans-serif">  false</font> if no attribute is associated with  
the key (logical)</TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_Type_get_attr(MPI_Datatype type, int type_keyval, void *attribute_val, int *flag) <BR></tt>  
<P> 
 <tt> MPI_TYPE_GET_ATTR(TYPE, TYPE_KEYVAL, ATTRIBUTE_VAL, FLAG, IERROR)<BR> INTEGER TYPE, TYPE_KEYVAL, IERROR<BR>INTEGER(KIND=MPI_ADDRESS_KIND) ATTRIBUTE_VAL<BR>LOGICAL FLAG <BR></tt>    
<P> 
 <font color="red">{<font color="black"> bool MPI::Datatype::Get_attr(int type_keyval, void* attribute_val) const <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
<P> 
<TABLE><TR><TD COLSPAN=2>MPI_TYPE_DELETE_ATTR(type, type_keyval)</TD></TR>  
<TR><TD> INOUT type</TD><TD>datatype from which the attribute is deleted (handle)</TD></TR>  
<TR><TD> IN type_keyval</TD><TD>key value (integer)</TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_Type_delete_attr(MPI_Datatype type, int type_keyval) <BR></tt>  
<P> 
 <tt> MPI_TYPE_DELETE_ATTR(TYPE, TYPE_KEYVAL, IERROR)<BR> INTEGER TYPE, TYPE_KEYVAL, IERROR <BR></tt>    
<P> 
  
 <font color="red">{<font color="black"> void MPI::Datatype::Delete_attr(int type_keyval) <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
  
  

<P>
<HR>
<A HREF="node152.htm#Node152"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node149.htm#Node149"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node154.htm#Node154"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node149.htm#Node149"> Caching</a>
<b>Next: </b><A HREF="node154.htm#Node154"> Error Class for Invalid Keyval</a>
<b>Previous: </b><A HREF="node152.htm#Node152"> Windows</a>
<P>
<HR>
Return to <A HREF="node434.htm">MPI-2.2 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-2.2 of September 4, 2009<BR>
HTML Generated on September 10, 2009
</FONT>
</BODY>
</HTML>
