<HTML>
<HEAD>
<!-- This file was generated by tohtml from chap-coll/coll.tex -->
<!-- with the command
tohtml erif"> MPI-2.0</font>
-->
<TITLE>Examples using <font face="sans-serif"> MPI_SCATTER</font>, <font face="sans-serif"> MPI_SCATTERV</font></TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<HR><H2><A NAME="Node98">97. Examples using  MPI_SCATTER,  MPI_SCATTERV</a></H2>
<A HREF="node97.htm#Node97"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node97.htm#Node97"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node99.htm#Node99"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node97.htm#Node97"> Scatter</a>
<b>Next: </b><A HREF="node99.htm#Node99"> Gather-to-all</a>
<b>Previous: </b><A HREF="node97.htm#Node97"> Scatter</a>
<P>
The examples in this section use intracommunicators.  
  
<BR><b> Example</b>   
  
  
The reverse of Example <a href="node96.htm#Node96">Examples using <font face="sans-serif"> MPI_GATHER</font>, <font face="sans-serif"> MPI_GATHERV</font> 
</a>.  
Scatter sets of 100 <tt> int</tt>s from the root to each process in the group.  
See Figure <a href="node98.htm#Figure9">9 
</a>.  
<P> 
<BR> 
<pre><tt>    MPI_Comm comm; 
    int gsize,*sendbuf; 
    int root, rbuf[100]; 
    ... 
    MPI_Comm_size( comm, &amp;gsize); 
    sendbuf = (int *)malloc(gsize*100*sizeof(int)); 
    ... 
    MPI_Scatter( sendbuf, 100, MPI_INT, rbuf, 100, MPI_INT, root, comm); 
</tt></pre> 
   
<P> 
<P> 
  <CENTER>  
</CENTER>  <P><IMG WIDTH=497 HEIGHT=208 SRC="mycoll-fig7.gif"><P>
  
    
  <BR> 
<b>Figure 9: </b><A NAME="Figure9">The root process scatters sets of 100 <tt> int</tt>s to each process
  in the group.
  </a><P> 
  
    
<BR><b> Example</b>   
  
  
The reverse of Example <a href="node96.htm#Node96">Examples using <font face="sans-serif"> MPI_GATHER</font>, <font face="sans-serif"> MPI_GATHERV</font> 
</a>.  
The root process scatters sets of 100 <tt> int</tt>s to the other processes,  
but the sets of 100 are <em> stride int</em>s apart in the sending buffer.  
Requires use of <font face="sans-serif"> MPI_SCATTERV</font>.  
Assume <IMG WIDTH=58 HEIGHT=9 SRC="img60.gif">
.  See Figure <a href="node98.htm#Figure10">10 
</a>.  
<P> 
<BR> 
<pre><tt>    MPI_Comm comm; 
    int gsize,*sendbuf; 
    int root, rbuf[100], i, *displs, *scounts; 
 
    ... 
 
    MPI_Comm_size( comm, &amp;gsize); 
    sendbuf = (int *)malloc(gsize*stride*sizeof(int)); 
    ... 
    displs = (int *)malloc(gsize*sizeof(int)); 
    scounts = (int *)malloc(gsize*sizeof(int)); 
    for (i=0; i&lt;gsize; ++i) { 
        displs[i] = i*stride; 
        scounts[i] = 100; 
    } 
    MPI_Scatterv( sendbuf, scounts, displs, MPI_INT, rbuf, 100, MPI_INT, 
                                                              root, comm); 
</tt></pre> 
   
<P> 
<P> 
  <CENTER>  
</CENTER>  <P><IMG WIDTH=497 HEIGHT=212 SRC="mycoll-fig8.gif"><P>
  
    
  <BR> 
<b>Figure 10: </b><A NAME="Figure10">The root process scatters sets of 100 <tt> int</tt>s, moving by
  <tt> stride int</tt>s from send to send in the scatter.
  </a><P> 
  
    
<BR><b> Example</b>   
  
  
The reverse of Example <a href="node96.htm#Node96">Examples using <font face="sans-serif"> MPI_GATHER</font>, <font face="sans-serif"> MPI_GATHERV</font> 
</a>.  
We have a varying stride between blocks at sending (root) side,  
at the receiving side we receive into the <tt> i</tt>-th column of a 100<I>&#215;</I>150  
C array.  
See Figure <a href="node98.htm#Figure11">11 
</a>.  
<P> 
<P><IMG WIDTH=409 HEIGHT=416 SRC="img61.gif"><P>
   
<P> 
  <CENTER>  
</CENTER>  <P><IMG WIDTH=611 HEIGHT=262 SRC="mycoll-fig9.gif"><P>
  
    
  <BR> 
<b>Figure 11: </b><A NAME="Figure11">The root scatters blocks of <tt> 100-i int</tt>s into
  column <tt> i</tt> of a 100$ x $150
  C array.  At the sending side, the blocks are <tt> stride[i] int</tt>s apart.
  </a><P> 
  
    
  

<P>
<HR>
<A HREF="node97.htm#Node97"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node97.htm#Node97"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node99.htm#Node99"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node97.htm#Node97"> Scatter</a>
<b>Next: </b><A HREF="node99.htm#Node99"> Gather-to-all</a>
<b>Previous: </b><A HREF="node97.htm#Node97"> Scatter</a>
<P>
<HR>
Return to <A HREF="node434.htm">MPI-2.2 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-2.2 of September 4, 2009<BR>
HTML Generated on September 10, 2009
</FONT>
</BODY>
</HTML>
