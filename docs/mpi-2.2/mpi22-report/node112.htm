<HTML>
<HEAD>
<!-- This file was generated by tohtml from chap-coll/coll.tex -->
<!-- with the command
tohtml erif"> MPI-2.0</font>
-->
<TITLE><font face="sans-serif"> MPI_REDUCE_SCATTER_BLOCK</font></TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<HR><H2><A NAME="Node112">110.  MPI_REDUCE_SCATTER_BLOCK</a></H2>
<A HREF="node111.htm#Node111"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node111.htm#Node111"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node113.htm#Node113"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node111.htm#Node111"> Reduce-Scatter</a>
<b>Next: </b><A HREF="node113.htm#Node113"> <font face="sans-serif"> MPI_REDUCE_SCATTER</font></a>
<b>Previous: </b><A HREF="node111.htm#Node111"> Reduce-Scatter</a>
<P>
<font color="black">  
<P> 
<font color="red"><TABLE><TR><TD COLSPAN=2>MPI_REDUCE_SCATTER_BLOCK( sendbuf, recvbuf, recvcount,  
datatype, op, comm)</TD></TR>  
<TR><TD> IN sendbuf</TD><TD> starting address of send buffer (choice)</TD></TR>  
<TR><TD> OUT recvbuf</TD><TD> starting address of receive buffer (choice)</TD></TR>  
<TR><TD> IN recvcount</TD><TD> element count per block (non-negative integer)</TD></TR>  
<TR><TD> IN datatype</TD><TD> data type of elements of send and receive buffers (handle)</TD></TR>  
<TR><TD> IN op</TD><TD> operation (handle)</TD></TR>  
<TR><TD> IN comm</TD><TD> communicator (handle)</TD></TR>  
</TABLE>  
<P> 
 <tt> int MPI_Reduce_scatter_block(void* sendbuf, void* recvbuf, int recvcount, MPI_Datatype datatype, MPI_Op op, MPI_Comm comm) <BR></tt>  
<P> 
 <tt> MPI_REDUCE_SCATTER_BLOCK(SENDBUF, RECVBUF, RECVCOUNT, DATATYPE, OP, COMM, IERROR) <BR> &lt;type&gt; SENDBUF(*), RECVBUF(*) <BR>INTEGER RECVCOUNT, DATATYPE, OP, COMM, IERROR <BR></tt>  
<P> 
  
 <font color="red">{<font color="black"> void MPI::Comm::Reduce_scatter_block(const void* sendbuf,  void* recvbuf, int recvcount, const MPI::Datatype&amp; datatype,  const MPI::Op&amp; op) const = 0 <font color="red"><em> (binding deprecated, see Section <a href="node328.htm#Node328">Deprecated since <font face="sans-serif"> MPI-2.2</font> 
</a>)</em> }<font color="black"><BR>  
  
<P> 
If <font face="sans-serif"> comm</font> is an intracommunicator, <font face="sans-serif"> MPI_REDUCE_SCATTER_BLOCK</font>  
first performs a global, element-wise reduction on vectors of <font face="sans-serif"> count = </font><tt> n</tt>*recvcount</font>  
elements in the send buffers defined by <font face="sans-serif"> sendbuf</font>, <font face="sans-serif"> count</font> and <font face="sans-serif"> datatype</font>,  
using the operation <font face="sans-serif"> op</font>, where <tt> n</tt> is the number of processes in the group of <font face="sans-serif"> comm</font>.  
The routine is called by all group members using the same arguments for <font face="sans-serif"> recvcount</font>,  
<font face="sans-serif"> datatype</font>, <font face="sans-serif"> op</font> and <font face="sans-serif"> comm</font>.  
The resulting vector is treated as <tt> n</tt> consecutive blocks of <font face="sans-serif"> recvcount</font> elements  
that are scattered to the processes of the group.  
The <tt> i</tt>-th block is sent to process <tt> i</tt> and stored in the receive buffer defined by  
<font face="sans-serif"> recvbuf</font>, <font face="sans-serif"> recvcount</font>, and <font face="sans-serif"> datatype</font>.  
<P> 
 
<BR> 
<em> Advice  
        to implementors.</em>  
<P> 
The <font face="sans-serif"> MPI_REDUCE_SCATTER_BLOCK</font> routine is functionally equivalent to:  
an <font face="sans-serif"> MPI_REDUCE</font> collective operation with <font face="sans-serif"> count</font> equal to <font face="sans-serif"> recvcount*</font><tt> n</tt></font>,  
followed by an <font face="sans-serif"> MPI_SCATTER</font> with <font face="sans-serif"> sendcount</font> equal to <font face="sans-serif"> recvcount</font>.  
However, a direct implementation may run faster.  
 (<em> End of advice to implementors.</em>) <BR> 
The ``in place'' option for intracommunictors is specified by passing <font face="sans-serif">  MPI_IN_PLACE</font>  
in the <font face="sans-serif"> sendbuf</font> argument on <em> all</em> processes.  
In this case, the input data is taken from the receive buffer.  
<P> 
If <font face="sans-serif"> comm</font> is an intercommunicator, then the result of the reduction of the data provided  
by processes in one group (group A) is scattered among processes in the other group (group B) and vice versa.  
Within each group, all processes provide the same value for the <font face="sans-serif"> recvcount</font> argument,  
and provide input vectors of <font face="sans-serif"> count = </font><tt> n</tt>*recvcount</font> elements stored in the send buffers,  
where <tt> n</tt> is the size of the group.  
The number of elements <font face="sans-serif"> count</font> must be the same for the two groups.  
The resulting vector from the other group is scattered in blocks of <font face="sans-serif"> recvcount</font>  
elements among the processes in the group.  
<P> 
 
<BR> 
<em> Rationale.</em>  
<P> 
The last restriction is needed so that the length of the send buffer of one group can be  
determined by the local <font face="sans-serif"> recvcount</font> argument of the other group.  
Otherwise, a communication is needed to figure out how many elements are reduced.  
 (<em> End of rationale.</em>) <BR> 
<font color="black">  
<font color="red">
<P>
<HR>
<A HREF="node111.htm#Node111"><IMG WIDTH=16 HEIGHT=16 SRC="previous.gif"></A><A HREF="node111.htm#Node111"><IMG WIDTH=16 HEIGHT=16 SRC="up.gif"></A><A HREF="node113.htm#Node113"><IMG WIDTH=16 HEIGHT=16 SRC="next.gif"></A><BR>
<b>Up: </b><A HREF="node111.htm#Node111"> Reduce-Scatter</a>
<b>Next: </b><A HREF="node113.htm#Node113"> <font face="sans-serif"> MPI_REDUCE_SCATTER</font></a>
<b>Previous: </b><A HREF="node111.htm#Node111"> Reduce-Scatter</a>
<P>
<HR>
Return to <A HREF="node434.htm">MPI-2.2 Standard Index</A><BR>
Return to <A HREF="http://www.mpi-forum.org/index.html">MPI Forum Home Page</A><BR>
<HR>
<FONT SIZE=-1>(Unofficial) MPI-2.2 of September 4, 2009<BR>
HTML Generated on September 10, 2009
</FONT>
</BODY>
</HTML>
